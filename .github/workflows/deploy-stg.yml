name: Deploy to STG

on:
  push:
    tags:
      - "release_[0-9]+"

concurrency: ${{ github.workflow }}

jobs:
  echo-stg:
    name: Echo for STG Deploy
    runs-on: ubuntu-latest
    environment: stg
    steps:
      - name: Echo deployment info
        run: |
          echo "ğŸš€ STG ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’é–‹å§‹ã—ã¾ã™"
          echo "å¯¾è±¡ã‚¿ã‚°: ${GITHUB_REF#refs/tags/}"
          echo "å®Ÿè¡Œãƒªãƒ³ã‚¯: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}"

  notify-failure:
    name: Notify STG Failure
    if: ${{ failure() || cancelled() }}
    runs-on: ubuntu-latest
    environment: stg
    needs: echo-stg
    steps:
      - run: echo "âŒ STG ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¤±æ•—ã¾ãŸã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ"
